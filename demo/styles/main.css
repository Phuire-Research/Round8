/* HiFi Functional Design - Main Entry Point */
/* Import-Bound Tailwind CSS with HiFi Base Replacement */

/* CSS Custom Property for Animatable Border Angle */
@property --border-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

/* 0. Import Space Mono font from Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

/* 1. Import HiFi base colors FIRST (defines utility classes) */
@import "./hifi-base.css";

/* 1.5. Import Markdown Layer Architecture System */
@import "./markdown-layers.css";

/* 2. Import Tailwind v4 (without preflight reset) */
@import "tailwindcss/theme" layer(theme);
@import "tailwindcss/utilities" layer(utilities);
* {
  font-family: 'Orbitron', monospace;
}
/* 3. HiFi-specific calculator components */
@layer components {
  /* Calculator Container - Responsive Width */
  .calculator-container {
    width: 100%;
    max-width: 587px;
    margin: 0 auto;
    padding: 0; /* No padding on container - handle in media queries */
  }

  /* Calculator Card - Glossy Black with Golden-Green Shine (Enhanced) */
  .calculator-card {
    @apply rounded-2xl shadow-2xl;
    padding: 10px !important;
    border-width: 3px !important;
    position: relative;
    isolation: isolate;
    overflow: hidden;

    /* Three-layer composition: Base Color → Spotlight → SVG Wireframe */
    background:
      /* Top: HiFi Helix Spiral Wireframe Pattern (contains contents) */
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Cdefs%3E%3Cstyle%3E.helix%7Bfill:none;stroke:%23000000;stroke-width:1;opacity:0.08%7D%3C/style%3E%3C/defs%3E%3Cg class='helix'%3E%3Cellipse cx='50' cy='40' rx='35' ry='12' /%3E%3Cpath d='M 15 40 Q 25 70, 50 80 T 85 120' /%3E%3Cpath d='M 85 40 Q 75 70, 50 80 T 15 120' /%3E%3Cellipse cx='50' cy='120' rx='35' ry='12' /%3E%3Cpath d='M 15 120 Q 25 150, 50 160 T 85 200' /%3E%3Cpath d='M 85 120 Q 75 150, 50 160 T 15 200' /%3E%3Cellipse cx='150' cy='40' rx='35' ry='12' /%3E%3Cpath d='M 115 40 Q 125 70, 150 80 T 185 120' /%3E%3Cpath d='M 185 40 Q 175 70, 150 80 T 115 120' /%3E%3Cellipse cx='150' cy='120' rx='35' ry='12' /%3E%3Cpath d='M 115 120 Q 125 150, 150 160 T 185 200' /%3E%3Cpath d='M 185 120 Q 175 150, 150 160 T 115 200' /%3E%3Cellipse cx='50' cy='-60' rx='35' ry='12' /%3E%3Cpath d='M 15 -60 Q 25 -30, 50 -20 T 85 20' /%3E%3Cpath d='M 85 -60 Q 75 -30, 50 -20 T 15 20' /%3E%3Cellipse cx='150' cy='-60' rx='35' ry='12' /%3E%3Cpath d='M 115 -60 Q 125 -30, 150 -20 T 185 20' /%3E%3Cpath d='M 185 -60 Q 175 -30, 150 -20 T 115 20' /%3E%3C/g%3E%3C/svg%3E"),
      /* Middle: Golden-green multicolored spotlight */
      radial-gradient(
        ellipse 70% 50% at 50% 50%,
        rgba(232, 213, 85, 0.2) 0%,
        rgba(196, 184, 67, 0.15) 25%,
        rgba(154, 154, 49, 0.1) 45%,
        rgba(112, 128, 31, 0.06) 65%,
        transparent 100%
      ),
      /* Bottom: Glossy black base color */
      linear-gradient(
        135deg,
        #1a1a1a 0%,
        #0a0a0a 30%,
        #000000 70%,
        #0a0a0a 100%
      );
    background-size: 200px 200px, 100% 100%, 100% 100%;
    background-position: 0 0, 0 0, 0 0;
    background-repeat: repeat, no-repeat, no-repeat;

    /* HiFi dimensional border - teal-cyan with 8% darker top/right */
    border-top: 2px solid #1b363c;      /* 8% darker teal-cyan */
    border-right: 2px solid #1b363c;    /* 8% darker teal-cyan */
    border-bottom: 2px solid #1d3b41;   /* Base teal-cyan */
    border-left: 2px solid #1d3b41;     /* Base teal-cyan */
    box-shadow:
      /* Golden-green ambient glow */
      0 8px 32px rgba(154, 154, 49, 0.15),
      /* Depth shadow */
      0 4px 16px rgba(0, 0, 0, 0.4),
      /* Inner golden-green highlight for glossy sheen */
      inset 0 1px 0 rgba(232, 213, 85, 0.2);
  }

  .calculator-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      to bottom,
      rgba(232, 213, 85, 0.15) 0%,
      rgba(232, 213, 85, 0.05) 30%,
      transparent 50%,
      rgba(0, 0, 0, 0.2) 100%
    );
    pointer-events: none;
    z-index: 0;
    border-radius: inherit;
  }

  /* Controls Wrapper - Frames Operands, Dial Pad, and Scientific sections */
  .controls-wrapper {
    background: linear-gradient(to bottom right, rgba(15, 23, 42, 0.95), rgba(0, 0, 0, 0.95));
    padding: 5px;
    border-radius: 10px;
    /* HiFi dimensional borders - maroon with 8% differential */
    border-top: 3px solid #381121;       /* 8% darker */
    border-right: 3px solid #381121;     /* 8% darker */
    border-bottom: 3px solid #421527;    /* 8% lighter */
    border-left: 3px solid #421527;      /* 8% lighter */
  }

  /* Calculator Header - Glossy Black with Golden-Green Shine */
  .calculator-header {
    position: relative;
    border-radius: 0.5rem;
    padding: 0.75rem;
    /* margin-bottom: 1rem */
    isolation: isolate;
    overflow: visible;

    /* HiFi dimensional border - warm brown-gold tones */
    border-top: 2px solid #704d11fc;
    border-right: 2px solid #704d11fc;
    border-bottom: 2px solid #a67219fc;
    border-left: 2px solid #a67219fc;

    /* Multi-layer glossy composition */
    background: radial-gradient(ellipse 80% 60% at 50% 0%, rgba(232, 213, 85, 0.25) 0%, rgba(196, 184, 67, 0.18) 20%, rgba(154, 154, 49, 0.12) 40%, rgba(112, 128, 31, 0.08) 60%, transparent 100%), linear-gradient(135deg, #362433 0%, #30200f 30%, #361e1e 70%, #29231d 100%);

    /* No drop shadow - only inset highlight */
    box-shadow: inset 0 1px 0 rgba(245, 220, 70, 0.2);
  }

  .calculator-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      to bottom,
      rgba(232, 213, 85, 0.12) 0%,
      rgba(232, 213, 85, 0.04) 40%,
      transparent 50%,
      rgba(0, 0, 0, 0.2) 100%
    );
    pointer-events: none;
    z-index: 1;
    border-radius: inherit;
  }

  /* Calculator Inner Structure - Structural Border Frame */
  .display-section {
    position: relative;
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 0.5rem;
    padding: 8px !important;
    margin-bottom: 8px !important;
    background: rgba(255, 255, 255, 0.03);
  }

  .operands-section {
    position: relative;
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 0.5rem;
    padding: 3px;
    margin-bottom: 3px !important;
    background: rgba(255, 255, 255, 0.03);
  }

  .dialpad-section {
    position: relative;
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 0.5rem;
    padding: 3px;
    margin-bottom: 1rem;
    background: rgba(255, 255, 255, 0.03);
  }

  .scientific-section {
    position: relative;
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 0.5rem;
    padding: 0.75rem;
    margin-bottom: 1rem;
    background: rgba(255, 255, 255, 0.03);
  }

  .dark .display-section,
  .dark .operands-section,
  .dark .dialpad-section,
  .dark .scientific-section {
    border-color: rgba(255, 255, 255, 0.05);
    background: rgba(0, 0, 0, 0.15);
  }

  /* Input Fields with HiFi Focus (Ochre = Attention) */
  .hifi-input {
    @apply w-full px-4 py-3 rounded-lg transition-all;
    @apply bg-white dark:bg-slate-800;
    @apply border-2 border-slate-300 dark:border-slate-600;
    @apply text-slate-900 dark:text-slate-100;
  }

  .hifi-input:focus {
    border-color: var(--color-ochre);
    --tw-ring-color: var(--color-ochre);
    --tw-ring-opacity: 0.5;
    @apply ring-2 outline-none;
  }

  /* Operation Buttons */
  .calc-btn {
    @apply px-6 py-3 rounded-lg font-semibold transition-all;
    @apply transform hover:scale-105 shadow-lg hover:shadow-xl;
    @apply text-white;
  }

  /* HiFi Button Variants */
  .calc-btn-viridian {
    background-color: var(--color-viridian);
  }

  .calc-btn-viridian:hover {
    background-color: var(--color-viridian-light);
  }

  .calc-btn-cobalt {
    background-color: var(--color-cobalt);
  }

  .calc-btn-cobalt:hover {
    background-color: var(--color-cobalt-light);
  }

  .calc-btn-amethyst {
    background-color: var(--color-amethyst);
  }

  .calc-btn-amethyst:hover {
    background-color: var(--color-amethyst-light);
  }

  .calc-btn-ochre {
    background-color: var(--color-ochre);
  }

  .calc-btn-ochre:hover {
    background-color: var(--color-ochre-light);
  }

  .calc-btn-red {
    background-color: var(--color-red);
  }

  .calc-btn-red:hover {
    background-color: var(--color-red-light);
  }

  /* Disabled Button States */
  .calc-btn:disabled {
    @apply opacity-30 cursor-not-allowed;
    @apply hover:scale-100 hover:shadow-lg;
  }

  /* Result Display (Maroon = Read) */
  .result-display {
    @apply p-4 rounded-lg border-2;
    background-color: rgb(from var(--color-maroon) r g b / 0.1);
    border-color: var(--color-maroon);
    color: var(--color-maroon);
  }

  .dark .result-display {
    background-color: rgb(from var(--color-maroon) r g b / 0.2);
  }

  /* Error Display (Red = Warning) */
  .error-display {
    @apply p-4 rounded-lg border-2;
    background-color: rgb(from var(--color-red) r g b / 0.1);
    border-color: var(--color-red);
    color: var(--color-red);
  }

  .dark .error-display {
    background-color: rgb(from var(--color-red) r g b / 0.2);
  }

  /* HiFi Labels (Secondary text on buttons) */
  .hifi-label {
    @apply text-xs opacity-75 mt-1 block;
    @apply group-hover:opacity-100 transition-opacity;
  }

  /* Bidirectional Light/Dark Mode Surfaces */
  .hifi-surface-light {
    @apply bg-slate-50 text-slate-900;
  }

  .hifi-surface-dark {
    @apply bg-slate-900 text-slate-100;
  }

  /* ========================================
     HiFi Three-Layer Button Composition
     Layer 1: Spotlight gradient (87.5% 12.5%)
     Layer 2: SVG pattern overlay (100px tiled)
     Layer 3: Content (text)
     Layer 4: Dimensional borders (8% differential)
     ======================================== */

  /* HiFi Button Wrappers - Shadow Clipping Containers */
  .hifi-btn-wrapper {
    @apply relative rounded-lg overflow-hidden;
    padding: 3px;
    background: rgba(0, 0, 0, 0.3);
    isolation: isolate;
    max-height: 60px;
  }

  .dark .hifi-btn-wrapper {
    background: rgba(0, 0, 0, 0.5);
  }

  /* Zero button wrapper spans 2 columns for center square layout */
  .hifi-btn-wrapper-zero {
    @apply relative rounded-lg overflow-hidden;
    padding: 3px;
    background: rgba(0, 0, 0, 0.3);
    isolation: isolate;
    grid-column: span 2;
    max-height: 60px;
  }

  .dark .hifi-btn-wrapper-zero {
    background: rgba(0, 0, 0, 0.5);
  }

  /* Digit Buttons (1-8): Cobalt/Implementation */
  .hifi-btn-digit {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-cobalt),
      radial-gradient(circle at 87.5% 12.5%, var(--color-cobalt) 0%, #151d1e 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-cobalt-border-dark);
    border-right: 2px solid var(--color-cobalt-border-dark);
    border-bottom: 2px solid var(--color-cobalt-border-light);
    border-left: 2px solid var(--color-cobalt-border-light);
    box-shadow: -8px 8px 32px var(--color-cobalt-shadow);
  }

  .hifi-btn-digit:hover {
    background-image:
      var(--pattern-cobalt),
      radial-gradient(circle at 87.5% 12.5%, var(--color-cobalt-light) 0%, #151d1e 88%);
    box-shadow: -6px 6px 24px var(--color-cobalt-shadow);
    transform: scale(0.96); /* Pressed-in effect */
  }

  .hifi-btn-digit:active {
    border-top: 2px solid var(--color-cobalt-border-light);
    border-right: 2px solid var(--color-cobalt-border-light);
    border-bottom: 2px solid var(--color-cobalt-border-dark);
    border-left: 2px solid var(--color-cobalt-border-dark);
  }

  /* Addition Button: Rust/Prospection */
  .hifi-btn-add {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-rust),
      radial-gradient(circle at 87.5% 12.5%, var(--color-rust) 0%, #1e1915 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-rust-border-dark);
    border-right: 2px solid var(--color-rust-border-dark);
    border-bottom: 2px solid var(--color-rust-border-light);
    border-left: 2px solid var(--color-rust-border-light);
    box-shadow: -8px 8px 32px var(--color-rust-shadow);
  }

  .hifi-btn-add:hover {
    background-image:
      var(--pattern-rust),
      radial-gradient(circle at 87.5% 12.5%, var(--color-rust-light) 0%, #1e1915 88%);
    box-shadow: -6px 6px 24px var(--color-rust-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-add:active {
    border-top: 2px solid var(--color-rust-border-light);
    border-right: 2px solid var(--color-rust-border-light);
    border-bottom: 2px solid var(--color-rust-border-dark);
    border-left: 2px solid var(--color-rust-border-dark);
  }

  /* Subtraction Button: Rose/Healing */
  .hifi-btn-subtract {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-rose),
      radial-gradient(circle at 87.5% 12.5%, var(--color-rose) 0%, #1e151d 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-rose-border-dark);
    border-right: 2px solid var(--color-rose-border-dark);
    border-bottom: 2px solid var(--color-rose-border-light);
    border-left: 2px solid var(--color-rose-border-light);
    box-shadow: -8px 8px 32px var(--color-rose-shadow);
  }

  .hifi-btn-subtract:hover {
    background-image:
      var(--pattern-rose),
      radial-gradient(circle at 87.5% 12.5%, var(--color-rose-light) 0%, #1e151d 88%);
    box-shadow: -6px 6px 24px var(--color-rose-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-subtract:active {
    border-top: 2px solid var(--color-rose-border-light);
    border-right: 2px solid var(--color-rose-border-light);
    border-bottom: 2px solid var(--color-rose-border-dark);
    border-left: 2px solid var(--color-rose-border-dark);
  }

  /* Zero/Abs.Zero Button: Maroon/Curation */
  .hifi-btn-zero {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-maroon),
      radial-gradient(circle at 87.5% 12.5%, var(--color-maroon) 0%, #1e1515 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-maroon-border-dark);
    border-right: 2px solid var(--color-maroon-border-dark);
    border-bottom: 2px solid var(--color-maroon-border-light);
    border-left: 2px solid var(--color-maroon-border-light);
    box-shadow: -8px 8px 32px var(--color-maroon-shadow);
  }

  .hifi-btn-zero:hover {
    background-image:
      var(--pattern-maroon),
      radial-gradient(circle at 87.5% 12.5%, var(--color-maroon-light) 0%, #1e1515 88%);
    box-shadow: -6px 6px 24px var(--color-maroon-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-zero:active {
    border-top: 2px solid var(--color-maroon-border-light);
    border-right: 2px solid var(--color-maroon-border-light);
    border-bottom: 2px solid var(--color-maroon-border-dark);
    border-left: 2px solid var(--color-maroon-border-dark);
  }

  /* Backspace Button: Amethyst/Operations */
  .hifi-btn-backspace {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-amethyst),
      radial-gradient(circle at 87.5% 12.5%, var(--color-amethyst) 0%, #1a151e 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-amethyst-border-dark);
    border-right: 2px solid var(--color-amethyst-border-dark);
    border-bottom: 2px solid var(--color-amethyst-border-light);
    border-left: 2px solid var(--color-amethyst-border-light);
    box-shadow: -8px 8px 32px var(--color-amethyst-shadow);
  }

  .hifi-btn-backspace:hover {
    background-image:
      var(--pattern-amethyst),
      radial-gradient(circle at 87.5% 12.5%, var(--color-amethyst-light) 0%, #1a151e 88%);
    box-shadow: -6px 6px 24px var(--color-amethyst-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-backspace:active {
    border-top: 2px solid var(--color-amethyst-border-light);
    border-right: 2px solid var(--color-amethyst-border-light);
    border-bottom: 2px solid var(--color-amethyst-border-dark);
    border-left: 2px solid var(--color-amethyst-border-dark);
  }

  /* Signed Toggle Button: Ochre/Drafting */
  .hifi-btn-signed {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-ochre),
      radial-gradient(circle at 87.5% 12.5%, var(--color-ochre) 0%, #1e1d15 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-ochre-border-dark);
    border-right: 2px solid var(--color-ochre-border-dark);
    border-bottom: 2px solid var(--color-ochre-border-light);
    border-left: 2px solid var(--color-ochre-border-light);
    box-shadow: -8px 8px 32px var(--color-ochre-shadow);
  }

  .hifi-btn-signed:hover {
    background-image:
      var(--pattern-ochre),
      radial-gradient(circle at 87.5% 12.5%, var(--color-ochre-light) 0%, #1e1d15 88%);
    box-shadow: -6px 6px 24px var(--color-ochre-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-signed:active {
    border-top: 2px solid var(--color-ochre-border-light);
    border-right: 2px solid var(--color-ochre-border-light);
    border-bottom: 2px solid var(--color-ochre-border-dark);
    border-left: 2px solid var(--color-ochre-border-dark);
  }

  /* Flip/Switch Input Button: Viridian/Instillment */
  .hifi-btn-flip {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-viridian),
      radial-gradient(circle at 87.5% 12.5%, var(--color-viridian) 0%, #1d1e15 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-viridian-border-dark);
    border-right: 2px solid var(--color-viridian-border-dark);
    border-bottom: 2px solid var(--color-viridian-border-light);
    border-left: 2px solid var(--color-viridian-border-light);
    box-shadow: -8px 8px 32px var(--color-viridian-shadow);
  }

  .hifi-btn-flip:hover {
    background-image:
      var(--pattern-viridian),
      radial-gradient(circle at 87.5% 12.5%, var(--color-viridian-light) 0%, #1d1e15 88%);
    box-shadow: -6px 6px 24px var(--color-viridian-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-flip:active {
    border-top: 2px solid var(--color-viridian-border-light);
    border-right: 2px solid var(--color-viridian-border-light);
    border-bottom: 2px solid var(--color-viridian-border-dark);
    border-left: 2px solid var(--color-viridian-border-dark);
  }

  /* Clear Button: Red/Warning (Special Case) */
  .hifi-btn-clear {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Orbitron', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-red),
      radial-gradient(circle at 87.5% 12.5%, var(--color-red) 0%, #1e1515 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-red-border-dark);
    border-right: 2px solid var(--color-red-border-dark);
    border-bottom: 2px solid var(--color-red-border-light);
    border-left: 2px solid var(--color-red-border-light);
    box-shadow: -8px 8px 32px var(--color-red-shadow);
  }

  .hifi-btn-clear:hover {
    background-image:
      var(--pattern-red),
      radial-gradient(circle at 87.5% 12.5%, var(--color-red-light) 0%, #1e1515 88%);
    box-shadow: -6px 6px 24px var(--color-red-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-clear:active {
    border-top: 2px solid var(--color-red-border-light);
    border-right: 2px solid var(--color-red-border-light);
    border-bottom: 2px solid var(--color-red-border-dark);
    border-left: 2px solid var(--color-red-border-dark);
  }

  /* Obsidian Button: Suite 0 - Foundational State (Informative Display) */
  .hifi-btn-obsidian {
    @apply relative font-semibold;
    @apply text-white;
    font-family: 'Space Mono', monospace;
    width: 100%;
    height: 100%;
    padding: 0;
    border-radius: 0;
    background-image:
      var(--pattern-obsidian),
      radial-gradient(circle at 87.5% 12.5%, #1a1a1a 0%, #000000 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid #0a0a0a;
    border-right: 2px solid #0a0a0a;
    border-bottom: 2px solid #2a2a2a;
    border-left: 2px solid #2a2a2a;
    box-shadow: -8px 8px 32px rgba(0, 0, 0, 0.8);
  }

  /* Calculate Button: Cobalt/Professional (Execution) */
  .hifi-btn-calculate {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Space Mono', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-cobalt),
      radial-gradient(circle at 87.5% 12.5%, var(--color-cobalt) 0%, #151d1e 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-cobalt-border-dark);
    border-right: 2px solid var(--color-cobalt-border-dark);
    border-bottom: 2px solid var(--color-cobalt-border-light);
    border-left: 2px solid var(--color-cobalt-border-light);
    box-shadow: -8px 8px 32px var(--color-cobalt-shadow);
  }

  .hifi-btn-calculate:hover {
    background-image:
      var(--pattern-cobalt),
      radial-gradient(circle at 87.5% 12.5%, var(--color-cobalt-light) 0%, #151d1e 88%);
    box-shadow: -6px 6px 24px var(--color-cobalt-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-calculate:active {
    border-top: 2px solid var(--color-cobalt-border-light);
    border-right: 2px solid var(--color-cobalt-border-light);
    border-bottom: 2px solid var(--color-cobalt-border-dark);
    border-left: 2px solid var(--color-cobalt-border-dark);
  }

  /* Comparison Buttons: Amethyst/Operations (Logical Connections) */
  .hifi-btn-compare {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Space Mono', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-amethyst),
      radial-gradient(circle at 87.5% 12.5%, var(--color-amethyst) 0%, #1a151e 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-amethyst-border-dark);
    border-right: 2px solid var(--color-amethyst-border-dark);
    border-bottom: 2px solid var(--color-amethyst-border-light);
    border-left: 2px solid var(--color-amethyst-border-light);
    box-shadow: -8px 8px 32px var(--color-amethyst-shadow);
  }

  .hifi-btn-compare:hover {
    background-image:
      var(--pattern-amethyst),
      radial-gradient(circle at 87.5% 12.5%, var(--color-amethyst-light) 0%, #1a151e 88%);
    box-shadow: -6px 6px 24px var(--color-amethyst-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-compare:active {
    border-top: 2px solid var(--color-amethyst-border-light);
    border-right: 2px solid var(--color-amethyst-border-light);
    border-bottom: 2px solid var(--color-amethyst-border-dark);
    border-left: 2px solid var(--color-amethyst-border-dark);
  }

  /* Multiply Button: Viridian/Instillment (Growth) */
  .hifi-btn-multiply {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Space Mono', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-viridian),
      radial-gradient(circle at 87.5% 12.5%, var(--color-viridian) 0%, #1d1e15 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-viridian-border-dark);
    border-right: 2px solid var(--color-viridian-border-dark);
    border-bottom: 2px solid var(--color-viridian-border-light);
    border-left: 2px solid var(--color-viridian-border-light);
    box-shadow: -8px 8px 32px var(--color-viridian-shadow);
  }

  .hifi-btn-multiply:hover:not(:disabled) {
    background-image:
      var(--pattern-viridian),
      radial-gradient(circle at 87.5% 12.5%, var(--color-viridian-light) 0%, #1d1e15 88%);
    box-shadow: -6px 6px 24px var(--color-viridian-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-multiply:active:not(:disabled) {
    border-top: 2px solid var(--color-viridian-border-light);
    border-right: 2px solid var(--color-viridian-border-light);
    border-bottom: 2px solid var(--color-viridian-border-dark);
    border-left: 2px solid var(--color-viridian-border-dark);
  }

  /* Divide Button: Ochre/Drafting (Partition) */
  .hifi-btn-divide {
    @apply relative px-6 py-3 rounded-lg font-semibold transition-all duration-300;
    @apply transform text-white;
    font-family: 'Space Mono', monospace;
    width: 100%;
    height: 100%;
    background-image:
      var(--pattern-ochre),
      radial-gradient(circle at 87.5% 12.5%, var(--color-ochre) 0%, #1e1d15 88%);
    background-repeat: repeat, no-repeat;
    background-size: 30px 30px, 100% 100%;
    background-position: 0 0, 0 0;
    border-top: 2px solid var(--color-ochre-border-dark);
    border-right: 2px solid var(--color-ochre-border-dark);
    border-bottom: 2px solid var(--color-ochre-border-light);
    border-left: 2px solid var(--color-ochre-border-light);
    box-shadow: -8px 8px 32px var(--color-ochre-shadow);
  }

  .hifi-btn-divide:hover:not(:disabled) {
    background-image:
      var(--pattern-ochre),
      radial-gradient(circle at 87.5% 12.5%, var(--color-ochre-light) 0%, #1e1d15 88%);
    box-shadow: -6px 6px 24px var(--color-ochre-shadow);
    transform: scale(0.96);
  }

  .hifi-btn-divide:active:not(:disabled) {
    border-top: 2px solid var(--color-ochre-border-light);
    border-right: 2px solid var(--color-ochre-border-light);
    border-bottom: 2px solid var(--color-ochre-border-dark);
    border-left: 2px solid var(--color-ochre-border-dark);
  }

  /* Disabled state for v0.0.2 buttons */
  .hifi-btn-multiply:disabled,
  .hifi-btn-divide:disabled,
  .hifi-btn-add:disabled,
  .hifi-btn-subtract:disabled,
  .hifi-btn-compare:disabled,
  .hifi-btn-calculate:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Version tag for future features */
  .version-tag {
    position: absolute;
    top: 2px;
    right: 2px;
    font-size: 0.6rem;
    font-weight: 600;
    padding: 1px 4px;
    background: rgba(0, 0, 0, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 3px;
    color: rgba(255, 255, 255, 0.6);
    font-family: 'Space Mono', monospace;
    pointer-events: none;
    z-index: 10;
  }

}

/* 4. Custom utilities for HiFi design */
@layer utilities {
  /* Text gradient for headers */
  .text-gradient-hifi {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(
      90deg,
      rgb(var(--color-maroon)),
      rgb(var(--color-ochre)),
      rgb(var(--color-rose))
    );
  }

  /* Smooth transitions */
  .transition-colors-300 {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }
}

/* === VIRIDIAN STRUCTURAL CORRECTIONS === */
/* Suite 4 Viridian + Suite 3 Ochre Component Styles */

/* 1. Accessibility-Safe Cursor Blink (DISABLED - Not Used) */
@keyframes blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0.2; }  /* Fade, not disappear */
}

.input-cursor {
  /* Cursor disabled - hidden permanently */
  display: none;
  width: 2px;
  height: 28px;
  background-color: var(--color-ochre);
  animation: none;  /* No animation */
  opacity: 0;
}

.input-row-active .input-cursor {
  display: none;  /* Keep hidden even when row is active */
  opacity: 0;
}

/* 2. Hover State Isolation (Touch vs Mouse Devices) */
@media (hover: none) {
  /* Touch devices: disable hover transforms */
  .dial-btn:hover,
  .operand-btn:hover,
  .sci-btn:hover {
    transform: none;
    box-shadow: none;
    background-color: inherit;
  }
}

@media (hover: hover) {
  /* Mouse devices: enable hover transforms */
  .dial-btn:hover {
    background-color: rgb(15 23 42);  /* slate-900 */
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  }

  .operand-add:hover {
    background-color: var(--color-viridian-light);
    transform: scale(0.96);
    box-shadow: 0 2px 8px rgba(64, 130, 109, 0.4);
  }

  .operand-subtract:hover {
    background-color: var(--color-cobalt-light);
    transform: scale(0.96);
    box-shadow: 0 2px 8px rgba(0, 71, 171, 0.4);
  }

  .operand-compare:hover {
    background-color: var(--color-amethyst-light);
    transform: scale(0.96);
    box-shadow: 0 2px 8px rgba(106, 13, 173, 0.4);
  }

  .operand-calculate:hover {
    background-color: rgb(34 197 94);  /* green-500 */
    transform: scale(0.96);
  }

  .operand-clear:hover {
    background-color: var(--color-red-light);
    transform: scale(0.96);
  }
}

/* 3. Additional Animations */
@keyframes slideInGlow {
  0% {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  50% {
    opacity: 1;
    transform: translateY(0) scale(1.02);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

@keyframes flash-ochre {
  0%, 100% { background-color: transparent; }
  50% { background-color: rgba(204, 119, 34, 0.3); }
}

@keyframes flash-red {
  0%, 100% { background-color: transparent; }
  50% { background-color: rgba(220, 20, 60, 0.1); }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* 4. Calculator Container Components */
.calculator-header {
  position: relative;
  text-align: center;
  overflow: visible;
}

.calculator-title {
  font-size: 2rem;
  font-weight: 700;
  margin-top: 1rem;
  margin-bottom: 0.5rem;
  position: relative;
  z-index: 2;
  text-shadow: 1px 2px crimson;
}

/* HiFi Eight with Rust Shadow */
.hifi-eight {
  text-shadow: 1px 2px var(--color-rust);
}

/* HiFi Letter Colors for CALC with Custom Shadows */
.hifi-viridian {
  color: var(--color-viridian);
  text-shadow: 1px 2px var(--color-ochre);
}

.hifi-cobalt {
  color: var(--color-cobalt);
  text-shadow: 1px 2px var(--color-viridian);
}

.hifi-amethyst {
  color: var(--color-amethyst);
  text-shadow: 1px 2px var(--color-cobalt);
}

.hifi-rose {
  color: var(--color-rose);
  text-shadow: 1px 2px var(--color-amethyst);
}

.calculator-subtitle-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0;
  padding: 0;
}

.calculator-subtitle {
  font-size: 0.875rem;
  color: rgb(123 173 39);
  font-weight: 500;
  letter-spacing: 0.05em;
  text-shadow: 1px 1px #00ffc9bf;
  margin: 0;
  padding: 0;
}

.calculator-subtitle.inactive {
  display: none;
}

#clockSubtitle {
  color: var(--color-viridian);
  text-shadow: 1px 1px var(--color-ochre);
}

/* ============================================================
   Clock Header Mode Styles - HiFi Functional Design
   ============================================================ */

/* Toggleable Header Enhancement */
.header-toggleable {
  cursor: pointer;
  user-select: none;
}

.header-toggleable:focus-visible {
  outline: 2px solid var(--color-ochre);
  outline-offset: 4px;
}

/* ============================================================
   HiFi Pattern Layers - Dual Mode SVG Textures
   CALC Mode: Maroon Grid (Curation)
   CLOCK Mode: Viridian Branch (Growth/Time)
   ============================================================ */

/* CALC Mode Pattern Layer (Maroon Grid) */
.calculator-header::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect x='10' y='10' width='35' height='35' stroke='%23800000' stroke-width='2' fill='none'/%3E%3Crect x='55' y='10' width='35' height='35' stroke='%23800000' stroke-width='2' fill='none'/%3E%3Crect x='10' y='55' width='35' height='35' stroke='%23800000' stroke-width='2' fill='none'/%3E%3Crect x='55' y='55' width='35' height='35' stroke='%23800000' stroke-width='2' fill='none'/%3E%3Ccircle cx='27.5' cy='27.5' r='8' stroke='%23800000' stroke-width='1.5' fill='none'/%3E%3Ccircle cx='72.5' cy='72.5' r='8' stroke='%23800000' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
  background-size: 33px 33px;
  background-position: 0 -3px;
  background-repeat: repeat;
  opacity: 0.1;
  transition: opacity 0.3s ease-out;
  pointer-events: none;
  z-index: 0;
  border-radius: 8px;
}

/* CLOCK Mode Pattern Layer (Ghost Grid) */
.calculator-header::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath d='M50 18 C62 18 70 28 70 40 L70 52 L66 48 L62 52 L58 48 L54 52 L50 48 L46 52 L42 48 L38 52 L34 48 L30 52 L30 40 C30 28 38 18 50 18 Z' stroke='%2340826D' stroke-width='2' fill='none'/%3E%3Cline x1='50' y1='0' x2='50' y2='18' stroke='%2340826D' stroke-width='1.5' stroke-dasharray='4,4'/%3E%3Cline x1='50' y1='52' x2='50' y2='100' stroke='%2340826D' stroke-width='1.5' stroke-dasharray='4,4'/%3E%3Cline x1='0' y1='35' x2='30' y2='35' stroke='%2340826D' stroke-width='1.5' stroke-dasharray='4,4'/%3E%3Cline x1='70' y1='35' x2='100' y2='35' stroke='%2340826D' stroke-width='1.5' stroke-dasharray='4,4'/%3E%3Ccircle cx='50' cy='0' r='3' stroke='%2340826D' stroke-width='1' fill='none'/%3E%3Ccircle cx='0' cy='35' r='3' stroke='%2340826D' stroke-width='1' fill='none'/%3E%3Ccircle cx='100' cy='35' r='3' stroke='%2340826D' stroke-width='1' fill='none'/%3E%3Ccircle cx='50' cy='100' r='3' stroke='%2340826D' stroke-width='1' fill='none'/%3E%3C/svg%3E");
  background-size: 16px 16px;
  background-position: 0 -3px;
  background-repeat: repeat;
  opacity: 0.1;
  transition: opacity 0.3s ease-out;
  pointer-events: none;
  z-index: 0;
  border-radius: 8px;
}

/* CALC MODE (Default) - Maroon Pattern Active */
.calculator-header:hover::before {
  opacity: 0.8;
}

.calculator-header:active::before {
  opacity: 1.0;
}

/* CLOCK MODE - Viridian Pattern Active, Maroon Stays Barely Visible */
.calculator-header.header-clock-mode::before {
  opacity: 0.1;
}

.calculator-header.header-clock-mode:hover::before {
  opacity: 0.1;
}

.calculator-header.header-clock-mode:hover::after {
  opacity: 0.8;
}

.calculator-header.header-clock-mode:active::after {
  opacity: 1.0;
}

/* Content Visibility Toggle */
.header-content {
  position: relative;
  z-index: 1;
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.header-calc-content {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  overflow: visible;
  flex-wrap: nowrap;
}

.header-calc-content .ghost-chomper {
  flex-shrink: 0;
}

.header-calc-content .calculator-title {
  margin-top: 0;
  margin-bottom: 0;
}

.header-clock-mode .header-calc-content {
  display: none;
}

/* Clock Display Styling */
.header-clock-display {
  font-family: 'Orbitron', monospace;
  font-size: 2rem;
  font-weight: 700;
  color: var(--color-viridian);
  text-shadow:
    0 0 10px rgba(74, 166, 133, 0.5),
    1px 2px var(--color-ochre);
  letter-spacing: 0.05em;
  font-variant-numeric: tabular-nums;
  margin: 0;
  padding: 0.5rem 0;
}

/* ============================================================
   Ghost Chomper Icon - Forever Clock Mode
   76px Fast Variant with Holographic Shadow
   ============================================================ */

.ghost-chomper {
  --ghost-size: 100px;
  --ghost-speed: 0.5s;

  width: var(--ghost-size);
  height: var(--ghost-size);
  background-repeat: no-repeat;
  background-size: calc(var(--ghost-size) * 8) var(--ghost-size);
  animation: ghost-chomp var(--ghost-speed) steps(8) infinite;

  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 100' width='800' height='100'%3E%3Cpath d='M50 8 C78 8 92 30 92 50 L92 48 L75 50 L92 52 L92 72 C92 72 86 72 86 80 C86 72 78 72 78 72 C78 72 72 72 72 80 C72 72 64 72 64 72 C64 72 58 72 58 80 C58 72 50 72 50 72 C50 72 44 72 44 80 C44 72 36 72 36 72 C36 72 30 72 30 80 C30 72 22 72 22 72 C22 72 16 72 16 80 C16 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3Cpath transform='translate(100,0)' d='M50 8 C78 8 92 30 92 50 L92 44 L70 50 L92 56 L92 72 C92 72 88 72 88 78 C88 72 80 72 80 72 C80 72 74 72 74 78 C74 72 66 72 66 72 C66 72 60 72 60 78 C60 72 52 72 52 72 C52 72 46 72 46 78 C46 72 38 72 38 72 C38 72 32 72 32 78 C32 72 24 72 24 72 C24 72 18 72 18 78 C18 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3Cpath transform='translate(200,0)' d='M50 8 C78 8 92 30 92 50 L92 38 L62 50 L92 62 L92 72 C92 72 86 72 86 82 C86 72 78 72 78 72 C78 72 72 72 72 82 C72 72 64 72 64 72 C64 72 58 72 58 82 C58 72 50 72 50 72 C50 72 44 72 44 82 C44 72 36 72 36 72 C36 72 30 72 30 82 C30 72 22 72 22 72 C22 72 16 72 16 82 C16 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3Cpath transform='translate(300,0)' d='M50 8 C78 8 92 30 92 50 L92 28 L50 50 L92 72 C92 72 86 72 86 88 C86 72 78 72 78 72 C78 72 72 72 72 88 C72 72 64 72 64 72 C64 72 58 72 58 88 C58 72 50 72 50 72 C50 72 44 72 44 88 C44 72 36 72 36 72 C36 72 30 72 30 88 C30 72 22 72 22 72 C22 72 16 72 16 88 C16 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3Cpath transform='translate(400,0)' d='M50 8 C78 8 92 30 92 50 L92 34 L55 50 L92 66 L92 72 C92 72 88 72 88 84 C88 72 80 72 80 72 C80 72 74 72 74 84 C74 72 66 72 66 72 C66 72 60 72 60 84 C60 72 52 72 52 72 C52 72 46 72 46 84 C46 72 38 72 38 72 C38 72 32 72 32 84 C32 72 24 72 24 72 C24 72 18 72 18 84 C18 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3Cpath transform='translate(500,0)' d='M50 8 C78 8 92 30 92 50 L92 40 L65 50 L92 60 L92 72 C92 72 86 72 86 80 C86 72 78 72 78 72 C78 72 72 72 72 80 C72 72 64 72 64 72 C64 72 58 72 58 80 C58 72 50 72 50 72 C50 72 44 72 44 80 C44 72 36 72 36 72 C36 72 30 72 30 80 C30 72 22 72 22 72 C22 72 16 72 16 80 C16 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3Cpath transform='translate(600,0)' d='M50 8 C78 8 92 30 92 50 L92 45 L72 50 L92 55 L92 72 C92 72 88 72 88 76 C88 72 80 72 80 72 C80 72 74 72 74 76 C74 72 66 72 66 72 C66 72 60 72 60 76 C60 72 52 72 52 72 C52 72 46 72 46 76 C46 72 38 72 38 72 C38 72 32 72 32 76 C32 72 24 72 24 72 C24 72 18 72 18 76 C18 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3Cpath transform='translate(700,0)' d='M50 8 C78 8 92 30 92 50 L92 47 L78 50 L92 53 L92 72 C92 72 86 72 86 78 C86 72 78 72 78 72 C78 72 72 72 72 78 C72 72 64 72 64 72 C64 72 58 72 58 78 C58 72 50 72 50 72 C50 72 44 72 44 78 C44 72 36 72 36 72 C36 72 30 72 30 78 C30 72 22 72 22 72 C22 72 16 72 16 78 C16 72 8 72 8 72 L8 50 C8 30 22 8 50 8 Z' fill='%234aa685'/%3E%3C/svg%3E");
}

@keyframes ghost-chomp {
  from { background-position: 0 0; }
  to { background-position: calc(var(--ghost-size) * -8) 0; }
}

.ghost-chomper.fast { --ghost-speed: 0.25s; }

.ghost-chomper.clock-icon {
  --ghost-size: 65px;
  --ghost-speed: 0.25s;
  transform: scaleX(0.88);
  filter: drop-shadow(0 0 10px rgba(74, 166, 133, 0.5))
          drop-shadow(1px 2px 0 var(--color-ochre));
}

.ghost-chomper.clock-icon.inactive {
  animation-play-state: paused;
  filter: brightness(0) invert(1)
          drop-shadow(0 0 10px rgba(255, 255, 255, 0.3))
          drop-shadow(1px 2px 0 var(--color-rose));
}

.ghost-chomper.clock-icon.inactive:hover {
  animation-play-state: unset;
  filter: unset;
}

/* Mobile Ghost Sizing - Prevent clipping on narrow screens */
@media (max-width: 520px) {
  .ghost-chomper.clock-icon {
    --ghost-size: 48px;
    transform: scaleX(0.85);
  }
}

@media (max-width: 374px) {
  .ghost-chomper.clock-icon {
    --ghost-size: 36px;
    transform: scaleX(0.8);
  }
}

.header-clock-content {
  display: none;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
}

.header-clock-mode .header-clock-content {
  display: flex;
}

/* 5. Display Section */
.display-section {
  background: linear-gradient(to bottom right,
    rgba(15, 23, 42, 0.95),
    rgba(0, 0, 0, 0.95)
  );
  border-radius: 1rem;
  padding: 1.25rem;
  margin-bottom: 1.25rem;
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4);
  /* HiFi dimensional borders - purple-amethyst with 8% differential */
  border-top: 3px solid #3a124d;      /* 8% darker */
  border-right: 3px solid #3a124d;    /* 8% darker */
  border-bottom: 3px solid #44165a;   /* 8% lighter */
  border-left: 3px solid #44165a;     /* 8% lighter */
  position: relative;
}

/* Processing Mode - Rotating Prismatic Border (Clock Mode Active) */
.display-section.processing-active {
  border: 3px solid transparent;
  background:
    linear-gradient(to bottom right, rgba(15, 23, 42, 0.95), rgba(0, 0, 0, 0.95)) padding-box,
    conic-gradient(
      from var(--border-angle),
      var(--color-maroon) 0deg,
      var(--color-rust) 51.43deg,
      var(--color-ochre) 102.86deg,
      var(--color-viridian) 154.29deg,
      var(--color-cobalt) 205.71deg,
      var(--color-amethyst) 257.14deg,
      var(--color-rose) 308.57deg,
      var(--color-maroon) 360deg
    ) border-box;
  animation: prismatic-border-rotate 3s linear infinite;
}

@keyframes prismatic-border-rotate {
  to {
    --border-angle: 360deg;
  }
}

/* Mode Toggle */
.mode-toggle-container {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 1rem;
}

.mode-toggle {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
}

.toggle-track {
  width: 56px;
  height: 28px;
  background-color: rgb(71 85 105);  /* slate-600 */
  border-radius: 14px;
  position: relative;
  transition: background-color 0.3s ease;
}

.dark .toggle-track {
  background-color: rgb(51 65 85);  /* slate-700 */
}

.toggle-thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 24px;
  height: 24px;
  background-color: white;
  border-radius: 12px;
  transition: transform 0.3s ease;
}

.dark .toggle-thumb {
  transform: translateX(28px);
}

.toggle-label {
  font-size: 0.875rem;
  color: rgb(148 163 184);  /* slate-400 */
}

.dark .toggle-label .light-label {
  display: none;
}

.dark .toggle-label .dark-label {
  display: inline;
}

.toggle-label .dark-label {
  display: none;
}

/* Display Rows */
.display-row {
  margin-bottom: 5px;
  border-radius: 0.75rem;
  padding-left: 8px;
  padding-right: 12px;
  padding-top: 8px;
  padding-bottom: 8px;
  border: 2px solid transparent;
  transition: all 0.2s ease;
}

.display-row:last-child {
  margin-bottom: 0;
}

/* Input Rows */
.input-row {
  background-color: rgba(30, 41, 59, 0.5);
  cursor: pointer;
  /* HiFi dimensional borders (inactive state only) - slate with 8% differential */
  border-top: 2px solid #414f61;      /* 8% darker */
  border-right: 2px solid #414f61;    /* 8% darker */
  border-bottom: 2px solid #4d5b71;   /* 8% lighter */
  border-left: 2px solid #4d5b71;     /* 8% lighter */
}

.input-row:hover {
  background-color: rgba(30, 41, 59, 0.7);
}

.input-row-active {
  /* Uniform border (no dimensional variation when active) */
  border: 2px solid var(--color-ochre);
  background-color: rgba(204, 119, 34, 0.1);
  box-shadow: 0 0 0 3px rgba(204, 119, 34, 0.2);
}

.input-label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
  font-size: 0.75rem;
  color: rgb(148 163 184);  /* slate-400 */
  font-weight: 500;
}

.label-hint {
  font-size: 0.625rem;
  opacity: 0.75;
}

.input-display {
  font-family: 'Orbitron', monospace;
  font-size: 1.5rem;
  font-weight: 600;
  color: rgb(241 245 249);  /* slate-100 */
  min-height: 36px;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.input-value {
  font-family: 'DSEG7-Classic', monospace;
  flex: 1;
  width: 100%;
  text-align: right;
  padding-right: 16px;
}

.input-value:empty::before {
  content: '0';
  opacity: 0.3;
}

/* Operand Row - HiFi Treatment */
.operand-row {
  text-align: center;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0;
}

.operand-display {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.operand-display button {
  width: 100%;
  min-height: 16px;
  cursor: default;
  pointer-events: none;
}

/* Override HiFi button styles in operand-display context */
/* All operand buttons are informative displays, not interactive elements */

.operand-display .hifi-btn-obsidian,
.operand-display .hifi-btn-add,
.operand-display .hifi-btn-subtract,
.operand-display .hifi-btn-multiply,
.operand-display .hifi-btn-divide,
.operand-display .hifi-btn-compare {
  padding: 0 !important;
  border-radius: 0 !important;
  transition: none !important;
  transform: none !important;
  border-top-width: 0.5px !important;
  border-right-width: 0.5px !important;
  border-bottom-width: 0.5px !important;
  border-left-width: 0.5px !important;
}

.operand-display .hifi-btn-add:hover,
.operand-display .hifi-btn-subtract:hover,
.operand-display .hifi-btn-multiply:hover,
.operand-display .hifi-btn-divide:hover,
.operand-display .hifi-btn-compare:hover {
  transform: none !important;
  box-shadow: -8px 8px 32px var(--color-rust-shadow);
}

.operand-display .hifi-btn-subtract:hover {
  box-shadow: -8px 8px 32px var(--color-rose-shadow);
}

.operand-display .hifi-btn-compare:hover {
  box-shadow: -8px 8px 32px var(--color-amethyst-shadow);
}

.operand-display .hifi-btn-add:active,
.operand-display .hifi-btn-subtract:active,
.operand-display .hifi-btn-multiply:active,
.operand-display .hifi-btn-divide:active,
.operand-display .hifi-btn-compare:active {
  border-top: 0.5px solid var(--color-rust-border-dark);
  border-right: 0.5px solid var(--color-rust-border-dark);
  border-bottom: 0.5px solid var(--color-rust-border-light);
  border-left: 0.5px solid var(--color-rust-border-light);
}

.operand-display .hifi-btn-subtract:active {
  border-top: 0.5px solid var(--color-rose-border-dark);
  border-right: 0.5px solid var(--color-rose-border-dark);
  border-bottom: 0.5px solid var(--color-rose-border-light);
  border-left: 0.5px solid var(--color-rose-border-light);
}

.operand-display .hifi-btn-compare:active {
  border-top: 0.5px solid var(--color-amethyst-border-dark);
  border-right: 0.5px solid var(--color-amethyst-border-dark);
  border-bottom: 0.5px solid var(--color-amethyst-border-light);
  border-left: 0.5px solid var(--color-amethyst-border-light);
}

/* Add Operation - Rust Phase (Prospector) */
.operand-row[data-operation="+"] {
  background-image:
    var(--pattern-rust),
    radial-gradient(circle at 87.5% 12.5%, var(--color-rust) 0%, #151d1e 88%);
  background-repeat: repeat, no-repeat;
  background-size: 30px 30px, 100% 100%;
  border-top: 2px solid var(--color-rust-border-dark);
  border-right: 2px solid var(--color-rust-border-dark);
  border-bottom: 2px solid var(--color-rust-border-light);
  border-left: 2px solid var(--color-rust-border-light);
}

/* Subtract Operation - Rose Phase (Healing) */
.operand-row[data-operation="-"] {
  background-image:
    var(--pattern-rose),
    radial-gradient(circle at 87.5% 12.5%, var(--color-rose) 0%, #151d1e 88%);
  background-repeat: repeat, no-repeat;
  background-size: 30px 30px, 100% 100%;
  border-top: 2px solid var(--color-rose-border-dark);
  border-right: 2px solid var(--color-rose-border-dark);
  border-bottom: 2px solid var(--color-rose-border-light);
  border-left: 2px solid var(--color-rose-border-light);
}

/* Multiply Operation - Viridian Phase (Instillment) */
.operand-row[data-operation="*"] {
  background-image:
    var(--pattern-viridian),
    radial-gradient(circle at 87.5% 12.5%, var(--color-viridian) 0%, #151d1e 88%);
  background-repeat: repeat, no-repeat;
  background-size: 30px 30px, 100% 100%;
  border-top: 2px solid var(--color-viridian-border-dark);
  border-right: 2px solid var(--color-viridian-border-dark);
  border-bottom: 2px solid var(--color-viridian-border-light);
  border-left: 2px solid var(--color-viridian-border-light);
}

/* Divide Operation - Ochre Phase (Drafting) */
.operand-row[data-operation="/"] {
  background-image:
    var(--pattern-ochre),
    radial-gradient(circle at 87.5% 12.5%, var(--color-ochre) 0%, #151d1e 88%);
  background-repeat: repeat, no-repeat;
  background-size: 30px 30px, 100% 100%;
  border-top: 2px solid var(--color-ochre-border-dark);
  border-right: 2px solid var(--color-ochre-border-dark);
  border-bottom: 2px solid var(--color-ochre-border-light);
  border-left: 2px solid var(--color-ochre-border-light);
}

/* Comparison Operations - Amethyst Phase (Operations) */
.operand-row[data-operation=">"],
.operand-row[data-operation="<"],
.operand-row[data-operation=">="],
.operand-row[data-operation="<="],
.operand-row[data-operation="=="],
.operand-row[data-operation="!="] {
  background-image:
    var(--pattern-amethyst),
    radial-gradient(circle at 87.5% 12.5%, var(--color-amethyst) 0%, #151d1e 88%);
  background-repeat: repeat, no-repeat;
  background-size: 30px 30px, 100% 100%;
  border-top: 2px solid var(--color-amethyst-border-dark);
  border-right: 2px solid var(--color-amethyst-border-dark);
  border-bottom: 2px solid var(--color-amethyst-border-light);
  border-left: 2px solid var(--color-amethyst-border-light);
}

.operand-label {
  font-size: 0.75rem;
  color: rgb(148 163 184);
  font-weight: 500;
  margin-bottom: 0.5rem;
  display: block;
  transform: translateY(14px);
}

.operand-display {
  font-family: 'Orbitron', monospace;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.operand-symbol {
  font-size: 0.875rem;
  font-weight: 700;
  color: rgb(241 245 249);
  display: inline-block;
}

.operand-name {
  font-size: 0.875rem;
  color: rgb(148 163 184);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Output Row */
.output-row {
  background-color: rgba(128, 0, 32, 0.15);
  /* HiFi dimensional borders - maroon with 8% differential */
  border-top: 2px solid var(--color-maroon-border-dark);
  border-right: 2px solid var(--color-maroon-border-dark);
  border-bottom: 2px solid var(--color-maroon-border-light);
  border-left: 2px solid var(--color-maroon-border-light);
  /* Square top corners, rounded bottom corners */
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  border-bottom-left-radius: 0.75rem;
  border-bottom-right-radius: 0.75rem;
  /* Additional top margin */
  margin-top: 8px;
  /* Enable transitions for viridian state */
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

/* Output Row - Viridian State (DEC mode) */
.output-row.viridian {
  background-color: rgba(74, 166, 133, 0.15) !important;
  border-top: 2px solid var(--color-viridian-border-dark) !important;
  border-right: 2px solid var(--color-viridian-border-dark) !important;
  border-bottom: 2px solid var(--color-viridian-border-light) !important;
  border-left: 2px solid var(--color-viridian-border-light) !important;
}

/* Output Row Viridian - Inner Display Override */
.output-row.viridian .digital-display-output {
  background: linear-gradient(135deg, #4aa685 0%, #017881 100%) !important;
  border-color: rgba(74, 166, 133, 0.4) !important;
}

.output-label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
  font-size: 0.75rem;
  color: rgb(148 163 184);
  font-weight: 500;
}

.output-display {
  font-family: 'Orbitron', monospace;
  font-size: 2rem;
  font-weight: 700;
  color: white;
  min-height: 48px;
  display: flex;
  align-items: center;
}

.output-value {
  font-family: 'DSEG7-Classic', monospace;
  flex: 1;
  width: 100%;
  text-align: right;
  padding-right: 16px;
}

.output-value:empty::before {
  content: '0';
  opacity: 0.3;
}

/* Error Row */
.error-row {
  background-color: rgba(220, 20, 60, 0.15);
  border: 2px solid var(--color-red);
}

.error-display {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--color-red);
}

.error-icon {
  font-size: 1.5rem;
}

.error-message {
  font-size: 0.875rem;
  font-weight: 500;
}

/* 6. Scientific Functions Section */
.scientific-section {
  margin-bottom: 1rem;
}

.section-label {
  font-size: 0.75rem;
  color: rgb(100 116 139);  /* slate-500 */
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.5rem;
  text-align: center;
  font-weight: 600;
}

.function-row {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 0.375rem;
  margin-bottom: 0.375rem;
}

.function-row:last-child {
  margin-bottom: 0;
}

.sci-btn,
.mem-btn {
  padding: 0.75rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  border-radius: 0.5rem;
  border: none;
  transition: all 0.15s ease;
  cursor: pointer;
}

.sci-btn:not(.disabled) {
  background-color: rgb(51 65 85);  /* slate-700 */
  color: white;
}

.sci-btn.disabled,
.mem-btn.disabled {
  background-color: rgb(30 41 59);  /* slate-800 */
  color: rgb(71 85 105);  /* slate-600 */
  opacity: 0.5;
  cursor: not-allowed;
}

/* 7. Operands Section */
.operands-section {
  margin-bottom: 1rem;
}

.operands-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.5rem;
}

.operand-btn {
  padding: 0.75rem 0.5rem;
  border-radius: 0.5rem;
  border: none;
  font-weight: 600;
  transition: all 0.15s ease;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  position: relative;
}

.btn-symbol {
  font-size: 1.5rem;
  line-height: 1;
}

.btn-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.version-tag {
  position: absolute;
  top: 0.25rem;
  right: 0.25rem;
  font-size: 0.625rem;
  background-color: rgba(0, 0, 0, 0.3);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
}

/* Operand Button Variants */
.operand-add {
  background-color: var(--color-viridian);
  color: white;
}

.operand-subtract {
  background-color: var(--color-cobalt);
  color: white;
}

.operand-compare {
  background-color: var(--color-amethyst);
  color: white;
}


.operand-calculate {
  background-color: rgb(22 163 74);  /* green-600 */
  color: white;
}

.operand-clear {
  background-color: var(--color-red);
  color: white;
}

.operand-flip {
  background-color: var(--color-ochre);
  color: white;
}

.operand-btn.disabled {
  background-color: rgb(51 65 85);  /* slate-700 */
  color: rgb(100 116 139);  /* slate-500 */
  opacity: 0.5;
  cursor: not-allowed;
}

.operand-btn:active:not(.disabled) {
  transform: scale(0.95);
}

/* 8. Dial Pad Section */
.dialpad-section {
  margin-bottom: 1rem;
}

.dialpad-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.5rem;
}

.dial-btn {
  font-size: 1.25rem;
  font-weight: 600;
  border-radius: 0.75rem;
  background-color: rgb(51 65 85);  /* slate-700 */
  color: white;
  transition: all 0.15s ease;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  /* HiFi Dimensional Border - Cobalt */
  border-top: 2px solid rgb(0 97 255);  /* darker cobalt */
  border-right: 2px solid rgb(0 97 255);  /* darker cobalt */
  border-bottom: 2px solid rgb(0 37 90);  /* lighter cobalt */
  border-left: 2px solid rgb(0 37 90);  /* lighter cobalt */
}

.dial-btn:active {
  transform: translateY(0);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  /* Inverted border for pressed effect - Cobalt */
  border-top: 2px solid rgb(0 37 90);  /* lighter cobalt */
  border-right: 2px solid rgb(0 37 90);  /* lighter cobalt */
  border-bottom: 2px solid rgb(0 97 255);  /* darker cobalt */
  border-left: 2px solid rgb(0 97 255);  /* darker cobalt */
}

/* Special Dial Buttons */
.dial-zero {
  grid-column: span 2;
  background-color: var(--color-ochre);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  /* HiFi Dimensional Border - Maroon */
  border-top: 2px solid #810000;  /* darker maroon */
  border-right: 2px solid #810000;  /* darker maroon */
  border-bottom: 2px solid #aa0000;  /* lighter maroon */
  border-left: 2px solid #aa0000;  /* lighter maroon */
}

.dial-zero:active {
  /* Inverted border for pressed effect - Maroon */
  border-top: 2px solid #aa0000;  /* lighter maroon */
  border-right: 2px solid #aa0000;  /* lighter maroon */
  border-bottom: 2px solid #810000;  /* darker maroon */
  border-left: 2px solid #810000;  /* darker maroon */
}

.zero-text {
  font-size: 1rem;
  font-weight: 700;
}

.zero-symbol {
  font-size: 1.5rem;
  opacity: 0.75;
}

.dial-backspace {
  background-color: rgb(75 85 99);  /* gray-600 */
  /* HiFi Dimensional Border - Amethyst */
  border-top: 2px solid #7215cf;  /* amethyst-border-dark - darker */
  border-right: 2px solid #7215cf;  /* amethyst-border-dark - darker */
  border-bottom: 2px solid #861af1;  /* amethyst-border-light - lighter */
  border-left: 2px solid #861af1;  /* amethyst-border-light - lighter */
}

.dial-backspace:active {
  /* Inverted border for pressed effect - Amethyst */
  border-top: 2px solid #861af1;  /* amethyst-border-light - lighter */
  border-right: 2px solid #861af1;  /* amethyst-border-light - lighter */
  border-bottom: 2px solid #7215cf;  /* amethyst-border-dark - darker */
  border-left: 2px solid #7215cf;  /* amethyst-border-dark - darker */
}

.dial-comma {
  background-color: rgb(71 85 105);  /* slate-600 */
  /* HiFi Dimensional Border - Ochre */
  border-top: 2px solid #bc6e20;  /* ochre-border-dark - darker */
  border-right: 2px solid #bc6e20;  /* ochre-border-dark - darker */
  border-bottom: 2px solid #db8024;  /* ochre-border-light - lighter */
  border-left: 2px solid #db8024;  /* ochre-border-light - lighter */
}

.dial-comma:active {
  /* Inverted border for pressed effect - Ochre */
  border-top: 2px solid #db8024;  /* ochre-border-light - lighter */
  border-right: 2px solid #db8024;  /* ochre-border-light - lighter */
  border-bottom: 2px solid #bc6e20;  /* ochre-border-dark - darker */
  border-left: 2px solid #bc6e20;  /* ochre-border-dark - darker */
}

.dial-switch {
  background-color: rgb(79 70 229);  /* indigo-600 */
}

/* 9. HiFi Legend */
.hifi-legend {
  margin-bottom: 0.75rem;
  padding: 0.75rem;
  background-color: rgba(15, 23, 42, 0.5);
  border-radius: 0.5rem;
}

.legend-row {
  display: flex;
  justify-content: space-around;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.legend-row:last-child {
  margin-bottom: 0;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.625rem;
  color: rgb(148 163 184);
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 3px;
}

/* 10. Version Info */
.version-info {
  text-align: center;
  font-size: 0.625rem;
  color: rgb(100 116 139);  /* slate-600 */
  line-height: 1.4;
  margin-bottom: 72px;
}

/* 11. Utility Classes */
.hidden {
  display: none !important;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* 12. Responsive Breakpoints - Mobile First Approach */

/* Base mobile styles for overflow prevention */
@media (max-width: 520px) {
  body {
    overflow-x: hidden;
  }

  /* Ensure calculator fits viewport - no padding */
  .calculator-overlay-layer {
    width: 100%;
    overflow-x: hidden;
    padding: 0 !important;
  }

  .calculator-layer-inner {
    width: 100%;
    padding: 0 !important;
  }
}

/* Small phones (320px - 374px) - iPhone SE, older Android */
@media (max-width: 374px) {
  .calculator-container {
    padding: 0; /* No container padding to prevent offset */
    width: 100%;
  }

  .calculator-card {
    padding: 6px !important;
    margin: 0.5rem; /* Apply margin to card instead */
  }

  /* Reduce display section padding for small screens */
  .display-section {
    padding: 6px !important;
  }

  .display-row {
    padding-left: 6px;
    padding-right: 8px;
    padding-top: 6px;
    padding-bottom: 6px;
    margin-bottom: 4px;
  }

  /* Adjust digital displays */
  .digital-display-value,
  .digital-active-layer,
  .digital-display-input .digital-active-layer,
  .digital-display-output .digital-active-layer {
    font-size: 14.5px !important;
  }

  /* Hide ghost layer on small screens */
  .digital-ghost-layer,
  .digital-display-input .digital-ghost-layer,
  .digital-display-output .digital-ghost-layer {
    display: none !important;
  }

  .digital-display-binary,
  .binary-display {
    font-size: 6.2px !important;
  }

  .calculator-subtitle {
    font-size: 13.2px !important;
  }

  /* Operands grid adjustments */
  .operands-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 0.25rem;
  }

  .operand-btn {
    padding: 0.5rem 0.25rem;
    min-height: 44px; /* iOS minimum touch target */
  }

  .operand-btn .btn-symbol {
    font-size: 1.25rem;
  }

  .operand-btn .btn-label {
    font-size: 0.625rem;
  }

  /* Dialpad grid adjustments */
  .dialpad-grid {
    gap: 0.25rem;
  }

  .dial-btn {
    padding: 0.75rem;
    font-size: 1rem;
    min-height: 44px; /* iOS minimum touch target */
  }

  /* Hide version tags on small screens */
  .version-tag {
    display: none;
  }
}

/* Standard phones (375px - 413px) - iPhone 12/13/14, Samsung Galaxy */
@media (min-width: 375px) and (max-width: 413px) {
  .calculator-container {
    padding: 0; /* No container padding to prevent offset */
    width: 100%;
  }

  .calculator-card {
    padding: 8px !important;
    margin: 0.75rem; /* Apply margin to card instead */
  }

  /* Display adjustments */
  .digital-display-value,
  .digital-active-layer,
  .digital-display-input .digital-active-layer,
  .digital-display-output .digital-active-layer {
    font-size: 14.5px !important;
  }

  /* Hide ghost layer on phone screens */
  .digital-ghost-layer,
  .digital-display-input .digital-ghost-layer,
  .digital-display-output .digital-ghost-layer {
    display: none !important;
  }

  .digital-display-binary,
  .binary-display {
    font-size: 6.2px !important;
  }

  .calculator-subtitle {
    font-size: 13.2px !important;
  }

  /* Operands grid */
  .operands-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 0.375rem;
  }

  .operand-btn {
    padding: 0.625rem 0.375rem;
    min-height: 48px; /* Material Design touch target */
  }

  .operand-btn .btn-symbol {
    font-size: 1.375rem;
  }

  /* Dialpad grid */
  .dialpad-grid {
    gap: 0.375rem;
  }

  .dial-btn {
    padding: 0.875rem;
    font-size: 1.125rem;
    min-height: 48px; /* Material Design touch target */
  }
}

/* Large phones (414px - 520px) - iPhone Plus, Pro Max */
@media (min-width: 414px) and (max-width: 520px) {
  .calculator-container {
    padding: 0; /* No container padding to prevent offset */
    width: 100%;
  }

  .calculator-card {
    margin: 1rem; /* Apply margin to card instead */
  }

  /* Display adjustments */
  .digital-display-value,
  .digital-active-layer,
  .digital-display-input .digital-active-layer,
  .digital-display-output .digital-active-layer {
    font-size: 14.5px !important;
  }

  /* Hide ghost layer on phone screens */
  .digital-ghost-layer,
  .digital-display-input .digital-ghost-layer,
  .digital-display-output .digital-ghost-layer {
    display: none !important;
  }

  .digital-display-binary,
  .binary-display {
    font-size: 6.2px !important;
  }

  .calculator-subtitle {
    font-size: 13.2px !important;
  }

  /* Operands grid */
  .operands-grid {
    grid-template-columns: repeat(4, 1fr);
  }

  .dialpad-grid {
    gap: 0.375rem;
  }

  .dial-btn {
    padding: 1rem;
    font-size: 1.125rem;
  }
}

/* Tablets and up (521px+) */
@media (min-width: 521px) {
  .calculator-container {
    max-width: 560px;
  }
}

/* Desktop (768px+) */
@media (min-width: 768px) {
  .calculator-container {
    max-width: 587px;
    padding: 0; /* No container padding */
  }

  .calculator-card {
    margin: 1rem; /* Card margin for desktop spacing */
  }
}

/* === SCIENTIFIC FRAME TOPOLOGY (⊐-shaped: top + left + right) === */

/* Frame Container */
.scientific-frame-container {
  margin-top: 1rem;
}

/* Top Row (6 scientific buttons horizontal) */
.scientific-top-row {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

/* Content Wrapper (Left Column + Center Content + Right Column) */
.scientific-content-wrapper {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 0.5rem;
}

/* Left Column (6 scientific buttons vertical) */
.scientific-left-column {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Center Content (Display + Operations + Dial Pad) */
.scientific-center-content {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Right Column (6 scientific buttons vertical) */
.scientific-right-column {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Operations Section (Single Row - 7 buttons) */
.operations-section {
  margin-bottom: 1rem;
}

.operations-row {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 0.5rem;
}

/* Size Parity: Operations match sci-btn sizing */
.operations-row .sci-btn {
  padding: 0.75rem 0.5rem;
  font-size: 0.875rem;
  font-weight: 600;
  border-radius: 0.5rem;
  border: none;
  transition: all 0.15s ease;
  cursor: pointer;
}

/* Hover states for operations in frame (match sci-btn pattern) */
@media (hover: none) {
  .operations-row .sci-btn:hover {
    transform: none;
    box-shadow: none;
    background-color: inherit;
  }
}

@media (hover: hover) {
  .operations-row .sci-btn:not(.disabled):hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  }

  .operand-add:hover {
    background-color: var(--color-viridian-light);
  }

  .operand-subtract:hover {
    background-color: var(--color-cobalt-light);
  }

  .operand-compare:hover {
    background-color: var(--color-amethyst-light);
  }

  .operand-calculate:hover {
    background-color: rgb(34 197 94);  /* green-500 */
  }

  .operand-clear:hover {
    background-color: rgb(239 68 68);  /* red-500 */
  }
}

.operations-row .sci-btn:active:not(.disabled) {
  transform: scale(0.95);
}

/* Responsive: Stack frame vertically on mobile */
@media (max-width: 640px) {
  .scientific-top-row {
    grid-template-columns: repeat(3, 1fr);
  }

  .scientific-content-wrapper {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .scientific-left-column,
  .scientific-right-column {
    flex-direction: row;
    flex-wrap: wrap;
  }

  .scientific-left-column .sci-btn,
  .scientific-right-column .sci-btn {
    flex: 1 1 calc(33.333% - 0.5rem);
  }

  .operations-row {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* ============================================================ */
/* Digital 7-Segment Display System (DSEG7-Classic-Bold)      */
/* Three-Layer Architecture: Ghost + Active + Noise Overlay   */
/* TARGET: Round8 Value Displays (NOT Binary Displays)        */
/* ============================================================ */

/* Base Digital Display Container for Round8 Values */
.digital-display-base {
  font-family: 'DSEG7-Classic', monospace;  /* DSEG7 as primary font */
  font-weight: bold;
  font-size: 20.5px;  /* Match ghost and active layers */
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
  position: relative;
  display: block;  /* Block display for full width */
  width: 100%;  /* Fill container width */
  padding: 0 !important;  /* No padding on base container - prevent override */
  border-radius: 0.375rem;
  border: 2px solid rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease;
}

/* Ghost Layer - All 8s (Unlit Segments) */
.digital-ghost-layer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  opacity: 0.15;
  z-index: 1;
  pointer-events: none;
  user-select: none;
  font-family: 'DSEG7-Classic', monospace;
  font-weight: bold;
  font-size: 20.5px;
  padding: 8px;
  text-align: right;  /* Align ghost text to right */
  transition: all 0.2s ease;
}

/* Active Layer - Actual Round8 Value */
.digital-active-layer {
  position: relative;
  z-index: 2;
  font-family: 'DSEG7-Classic', monospace;
  font-weight: bold;
  font-size: 20.5px;
  padding: 8px;
  text-align: right;  /* Align active text to right */
  width: 100%;  /* Fill container width */
  display: block;  /* Block display for full width */
  transition: all 0.2s ease;
  /* Text color and shadow defined per display type variant */
}

/* Prismatic Noise Overlay */
.digital-noise-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  user-select: none;
  opacity: 0.08;
  z-index: 3;
  background-image: var(--pattern-lcd-scanlines);
  background-repeat: repeat;
}

/* Input Display Variant (Ochre Background) */
.digital-display-input {
  background: linear-gradient(135deg, #C8A15D 0%, #b89650 100%);  /* Ochre gradient */
  border-color: rgba(200, 161, 93, 0.4);
  filter: saturate(0.3);  /* Desaturated when inactive */
  transition: filter 0.3s ease;
}

/* Active input display - restore saturation */
.input-row-active .digital-display-input {
  filter: saturate(1);  /* Full saturation when active */
}

.digital-display-input .digital-ghost-layer {
  color: rgb(0 0 0 / 33%);  /* Dark ghost on light background */
}

.digital-display-input .digital-active-layer {
  color: #1a1a1a;  /* Dark text on light ochre background */
  text-shadow: 0px 2px 4px var(--color-ochre-complement-shadow);  /* Blue-violet shadow */
  padding-right: 9px;  /* Proper alignment of input value */
}

/* Output Display Variant (Maroon Background) */
.digital-display-output {
  background: linear-gradient(135deg, #800020 0%, #6b001a 100%);  /* Maroon gradient */
  border-color: rgba(128, 0, 32, 0.4);
  filter: saturate(0.3);  /* Desaturated when no calculation performed */
  transition: filter 0.3s ease;
}

/* Active output display - restore saturation after calculation */
.output-row-active .digital-display-output {
  filter: saturate(1);  /* Full saturation after calculation */
}

.digital-display-output .digital-ghost-layer {
  color: rgba(255, 255, 255, 0.08);  /* Light ghost on dark background */
}

.digital-display-output .digital-active-layer {
  color: #e2e8f0;  /* Light text on dark maroon background */
  text-shadow: 0px 2px 4px var(--color-maroon-complement-shadow);  /* Teal-cyan shadow */
  padding-right: 9px;  /* Proper alignment of output value */
}

/* Hover State Enhancement (Subtle Glow) */
.digital-display-base:hover .digital-active-layer {
  filter: brightness(1.1);
}

/* ============================================================ */
/* Section Wrappers for Combined Display Areas                 */
/* ============================================================ */

/* Input Section Wrapper - Contains Round8 value + binary */
.input-section-wrapper {
  width: 100%;
  padding: 8px 12px 8px 8px;  /* Internal padding for content */
}

/* Output Section Wrapper - Contains Round8 value + binary */
.output-section-wrapper {
  width: 100%;
  padding: 8px 12px 8px 8px;  /* Internal padding for content */
  /* Square top corners, rounded bottom corners */
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  border-bottom-left-radius: 0.75rem;
  border-bottom-right-radius: 0.75rem;
}

/* Nested Display Containers (no background) */
.input-section-wrapper .input-display,
.output-section-wrapper .output-display {
  background: transparent;
  border: none;
  padding: 0;
  margin-bottom: 0.5rem;
  position: relative;
  width: 100%;
  display: block;
}

/* Cursor Handling for Input Displays */
.digital-active-layer .input-cursor {
  font-family: inherit;  /* Use DSEG7 font */
  animation: blink 1s infinite;
  margin-left: 2px;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* ============================================================ */
/* Original Binary Display with Text Wrapping                  */
/* IMPORTANT: Modified to enable text wrapping                 */
/* ============================================================ */

/* Binary Display Wrapper - Contains binary display + rotation buttons */
.binary-display-wrapper {
  display: flex;
  gap: 6px;
  align-items: center;
}

/* Binary displays with Orbitron font */
.binary-display {
  /* Use Orbitron font family */
  font-family: 'Orbitron', monospace !important;
  font-size: 9.2px; /* Base size, overridden by media queries */
  /* Preserve original dark red background */
  background: #4d0000 !important;
  /* Preserve original text color with cyan text shadow */
  color: #d4853d !important;
  text-shadow: 0.5px 0.5px rgb(5 141 208);
  /* Disable overflow - allow natural text flow */
  overflow: visible !important;
  /* Enable text wrapping */
  text-wrap: wrap !important;
  word-wrap: break-word !important;
  word-break: break-all !important;
  /* Keep original padding */
  padding: 0.5rem 0.75rem !important;
  /* HiFi dimensional border - dark red with lighter bottom/left */
  border-radius: 0.375rem !important;
  border-top: 2px solid #931a1a !important;      /* Darker top */
  border-right: 2px solid #931a1a !important;    /* Darker right */
  border-bottom: 2px solid #c10000 !important;   /* Lighter bottom */
  border-left: 2px solid #c10000 !important;     /* Lighter left */
}

/* Binary display hover effect */
.binary-display:hover {
  background: #660000 !important;
}

/* ============================================================ */
/* Output Mode Toggle - HiFi Functional Design                  */
/* Minimal HTML: button + span.toggle-track                      */
/* Labels via ::before/::after pseudo-elements                   */
/* Suite 4 Viridian Structural Instillment                       */
/* ============================================================ */

.output-mode-toggle {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem;
  border: none;
  background: transparent;
  cursor: pointer;
  font-family: 'Orbitron', monospace;
  flex-shrink: 0;
  outline: none;
}

/* Keyboard focus only (accessibility) */
.output-mode-toggle:focus-visible {
  outline: 2px solid var(--color-ochre);
  outline-offset: 2px;
}

/* R8 Label (before track) - CSS Generated */
.output-mode-toggle::before {
  content: 'R8';
  font-size: 0.625rem;
  font-weight: 700;
  letter-spacing: 0.05em;
  color: var(--color-maroon);
  text-shadow: 0 0 6px rgba(128, 0, 32, 0.5);
  transition: all 0.3s ease;
}

/* DEC Label (after track) - CSS Generated */
.output-mode-toggle::after {
  content: 'DEC';
  font-size: 0.625rem;
  font-weight: 700;
  letter-spacing: 0.05em;
  color: var(--color-viridian);
  opacity: 0.4;
  transition: all 0.3s ease;
}

/* Active State: Label swap */
.output-mode-toggle[aria-pressed="true"]::before {
  opacity: 0.4;
  text-shadow: none;
}

.output-mode-toggle[aria-pressed="true"]::after {
  opacity: 1;
  text-shadow: 0 0 6px rgba(74, 166, 133, 0.5);
}

/* Toggle Track - HiFi Maroon default */
.toggle-track {
  width: 32px;
  height: 18px;
  border-radius: 9px;
  position: relative;
  transition: all 0.3s ease;

  /* HiFi Three-Layer Background */
  background-image:
    var(--pattern-maroon),
    radial-gradient(circle at 25% 50%, var(--color-maroon) 0%, #1e1515 88%);
  background-repeat: repeat, no-repeat;
  background-size: 30px 30px, 100% 100%;

  /* HiFi Dimensional Borders - Maroon */
  border-top: 2px solid var(--color-maroon-border-dark);
  border-right: 2px solid var(--color-maroon-border-dark);
  border-bottom: 2px solid var(--color-maroon-border-light);
  border-left: 2px solid var(--color-maroon-border-light);
  box-shadow: -3px 3px 12px var(--color-maroon-shadow);
}

/* Active State: Viridian */
.output-mode-toggle[aria-pressed="true"] .toggle-track {
  background-image:
    var(--pattern-viridian),
    radial-gradient(circle at 75% 50%, var(--color-viridian) 0%, #1d1e15 88%);

  /* HiFi Dimensional Borders - Viridian */
  border-top: 2px solid var(--color-viridian-border-dark);
  border-right: 2px solid var(--color-viridian-border-dark);
  border-bottom: 2px solid var(--color-viridian-border-light);
  border-left: 2px solid var(--color-viridian-border-light);
  box-shadow: -3px 3px 12px var(--color-viridian-shadow);
}

/* Toggle Thumb - Positioned via ::after */
.toggle-track::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  transition: transform 0.3s ease;
}

/* Active State: Thumb slides right */
.output-mode-toggle[aria-pressed="true"] .toggle-track::after {
  transform: translateX(14px);
}
